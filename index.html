<!DOCTYPE html>
<html>
<head>
    <title>AppLink 테스트</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript">
        window.onload = function() {
            // 딥 링크와 스토어 URL
            var androidDeepLink = "intent://dhdheb.github.io/reservation#Intent;scheme=https;package=com.example.yemi;end";
            var iosDeepLink = "https://dhdheb.github.io/reservation";
            var androidStoreLink = "https://play.google.com/store/apps/details?id=com.example.yemi";
            var iosStoreLink = "https://apps.apple.com/app/id0000000000";

            // 플랫폼 확인
            var isAndroid = /android/i.test(navigator.userAgent);
            var isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;

            // "브라우저에서 열기" 버튼 클릭 시 브라우저로 이동
            document.getElementById('openInBrowser').onclick = function() {
                window.open("https://dhdheb.github.io", "_blank");
            };

            if (isAndroid) {
                // Android: intent:// 스키마로 앱 실행 시도
                location.href = androidDeepLink;

                // 앱 실행 실패 시 Play 스토어로 이동
                setTimeout(function() {
                    location.href = androidStoreLink;
                }, 1500);
            } else if (isIOS) {
                // iOS: 일반 딥 링크로 앱 실행 시도
                location.href = iosDeepLink;

                // 앱 실행 실패 시 App Store로 이동
                setTimeout(function() {
                    location.href = iosStoreLink;
                }, 1500);
            }
        };
    </script>
</head>
<body>
    <h1>AppLink 테스트</h1>
    <p>앱이 설치된 경우 실행되고, 없으면 스토어로 이동합니다.</p>
    <button id="openInBrowser" style="margin-top: 20px; padding: 10px 20px; font-size: 16px;">
        브라우저에서 열기
    </button>
</body>
</html>
